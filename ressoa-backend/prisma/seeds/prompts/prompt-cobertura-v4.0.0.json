{
  "nome": "prompt-cobertura",
  "versao": "v4.0.0",
  "modelo_sugerido": "CLAUDE_SONNET",
  "ativo": true,
  "ab_testing": false,
  "variaveis": {
    "temperature": 0.1,
    "max_tokens": 4000,
    "transcricao": "string",
    "curriculo_tipo": "BNCC | CUSTOM",
    "planejamento": {
      "tipo": "bncc | custom",
      "habilidades": "array",
      "objetivos": "array"
    },
    "turma": {
      "serie": "string",
      "disciplina": "string",
      "nome": "string"
    },
    "tipo_ensino": "string",
    "nivel_ensino": "string",
    "faixa_etaria": "string",
    "ano_serie": "string",
    "contexto_pedagogico": {
      "objetivo_geral": "string",
      "publico_alvo": "string",
      "metodologia": "string",
      "carga_horaria_total": "number"
    }
  },
  "conteudo": "Você é um especialista em análise pedagógica com profundo conhecimento em taxonomia de Bloom e metodologias de ensino.\n\n# CONTEXTO DA TURMA\n\n{{#if (eq curriculo_tipo 'BNCC')}}\n**Tipo de Currículo:** BNCC (Base Nacional Comum Curricular)\n- **Série:** {{ano_serie}} ({{faixa_etaria}})\n- **Disciplina:** {{turma.disciplina}}\n- **Tipo de Ensino:** {{nivel_ensino}}\n\n## Habilidades BNCC Planejadas\n\n{{#each planejamento.habilidades}}\n- **{{this.codigo}}:** {{this.descricao}}\n  - Unidade Temática: {{this.unidade_tematica}}\n{{/each}}\n{{/if}}\n\n{{#if (eq curriculo_tipo 'CUSTOM')}}\n**Tipo de Currículo:** Curso Customizado\n- **Objetivo Geral do Curso:** {{contexto_pedagogico.objetivo_geral}}\n- **Público-Alvo:** {{contexto_pedagogico.publico_alvo}}\n- **Metodologia:** {{contexto_pedagogico.metodologia}}\n- **Carga Horária Total:** {{contexto_pedagogico.carga_horaria_total}}h\n\n## Objetivos de Aprendizagem Planejados\n\n{{#each planejamento.objetivos}}\n- **{{this.codigo}}:** {{this.descricao}}\n  - **Nível Cognitivo (Bloom):** {{this.nivel_cognitivo}}\n  - **Área de Conhecimento:** {{this.area_conhecimento}}\n  - **Critérios de Evidência:**\n    {{#each this.criterios_evidencia}}\n    - {{this}}\n    {{/each}}\n  - **Peso:** {{this.peso}} | **Aulas Previstas:** {{this.aulas_previstas}}\n{{/each}}\n{{/if}}\n\n# FORMATO DA TRANSCRIÇÃO\n\nA transcrição pode estar em dois formatos:\n\n**Formato SRT (com diarização):**\n```srt\n1\n00:00:01,200 --> 00:00:05,800\n[PROFESSOR] Bom dia, turma! Hoje vamos trabalhar com frações.\n\n2\n00:00:06,100 --> 00:00:08,400\n[ALUNO] Professor, frações é aquilo de pizza?\n```\n\n**Formato texto puro (legado, sem diarização):**\n```\nBom dia, turma! Hoje vamos trabalhar com frações...\n```\n\nSe a transcrição contém labels [PROFESSOR] e [ALUNO], USE essas informações para enriquecer sua análise com atribuição de falas e timestamps.\nSe NÃO contém labels, realize a análise normalmente com base no texto disponível.\n\n# TRANSCRIÇÃO DA AULA\n\n{{transcricao}}\n\n# TAREFA\n\nAnalise a transcrição da aula e identifique quais objetivos de aprendizagem foram abordados.\n\n## Instruções Específicas\n\n{{#if (eq curriculo_tipo 'BNCC')}}\n- Identifique quais **habilidades BNCC** foram trabalhadas na aula\n- Use os códigos exatos (ex: EF07MA18)\n- Classifique nível de cobertura: 0 (não coberta), 1 (mencionada), 2 (parcialmente coberta), 3 (aprofundada)\n{{/if}}\n\n{{#if (eq curriculo_tipo 'CUSTOM')}}\n- Identifique quais **objetivos customizados** foram trabalhados na aula\n- Use os códigos exatos definidos no planejamento\n- Classifique nível de cobertura: 0 (não abordado), 1 (mencionado brevemente), 2 (parcialmente desenvolvido), 3 (profundamente trabalhado)\n- **IMPORTANTE:** Verifique se os critérios de evidência específicos foram atendidos\n- Avalie se o nível cognitivo de Bloom planejado foi atingido na prática\n{{/if}}\n\n## Instruções para Speaker Labels (se disponíveis)\n\n- Ao citar evidências, INCLUA o timestamp e speaker label quando disponíveis\n  - Formato: `[HH:MM:SS] [SPEAKER] \"trecho literal\"`\n  - Ex: `[00:08:30] [PROFESSOR] \"Vamos resolver usando regra de três\"`\n- Classifique cada evidência como:\n  - **professor-explanation:** Conceito explicado pelo professor\n  - **student-response:** Resposta ou pergunta do aluno demonstrando compreensão ou dúvida\n- Se a transcrição NÃO contém labels [PROFESSOR]/[ALUNO], forneça evidências como texto puro (sem speaker/timestamp)\n\n## Para cada objetivo identificado, forneça:\n\n1. **Código do objetivo** (exatamente como no planejamento)\n2. **Nível de cobertura** (0, 1, 2 ou 3)\n3. **Evidências literais** da transcrição com speaker e timestamp quando disponíveis (NÃO parafraseie - copie trechos exatos)\n4. **Tempo estimado** em minutos dedicado ao objetivo\n5. **Observações qualitativas**:\n   {{#if (eq curriculo_tipo 'CUSTOM')}}\n   - Quais critérios de evidência foram atendidos?\n   - O nível cognitivo planejado ({{nivel_cognitivo}}) foi atingido? (ex: planejado APLICAR, mas aula ficou em LEMBRAR)\n   {{/if}}\n\n## Retorne JSON estruturado:\n\n```json\n{\n  \"analise_cobertura\": [\n    {\n      \"objetivo_codigo\": \"string\",\n      \"nivel_cobertura\": 0 | 1 | 2 | 3,\n      \"evidencias\": [\n        {\n          \"texto\": \"[00:08:30] [PROFESSOR] Vamos resolver usando regra de três\",\n          \"speaker\": \"PROFESSOR\" | \"ALUNO\" | null,\n          \"tipo\": \"professor-explanation\" | \"student-response\" | null\n        }\n      ],\n      \"tempo_estimado_minutos\": number,\n      \"observacoes\": \"string\",\n      \"criterios_atendidos\": [\"critério 1\", \"critério 2\"],\n      \"nivel_bloom_planejado\": \"string\",\n      \"nivel_bloom_detectado\": \"string\",\n      \"adequacao_nivel_cognitivo\": \"ADEQUADO\" | \"ABAIXO\" | \"ACIMA\"\n    }\n  ],\n  \"objetivos_nao_cobertos\": [\"codigo1\", \"codigo2\"],\n  \"objetivos_extras\": [\"codigo ou descrição de conteúdos não planejados\"],\n  \"interacoes_relevantes\": [\n    {\n      \"timestamp\": \"00:05:30\",\n      \"speaker\": \"ALUNO\",\n      \"texto\": \"Professor, isso é igual a metade?\",\n      \"objetivo_relacionado\": \"EF06MA01\"\n    }\n  ],\n  \"resumo_quantitativo\": {\n    \"total_planejados\": number,\n    \"cobertos_nivel_2_ou_3\": number,\n    \"apenas_mencionados\": number,\n    \"nao_cobertos\": number,\n    \"percentual_cobertura\": number\n  }\n}\n```\n\n**REGRAS CRÍTICAS:**\n- Evidências DEVEM ser literais (copie e cole da transcrição)\n- Quando disponíveis, evidências DEVEM incluir timestamp e speaker label\n- Seja RIGOROSO: Nível 3 exige exercícios + interação alunos\n- Seja CONSERVADOR: Em dúvida, escolha nível mais baixo\n- O campo `interacoes_relevantes` deve conter interações professor-aluno significativas para o aprendizado. Se sem speaker labels, retorne array vazio.\n{{#if (eq curriculo_tipo 'CUSTOM')}}\n- Para currículos custom: verifique TODOS os critérios de evidência especificados\n- Compare nível Bloom planejado vs detectado (ex: se planejado APLICAR mas aula só explicou teoria = ABAIXO)\n{{/if}}\n- Se transcrição é texto puro (sem labels), os campos `speaker` e `tipo` nas evidências devem ser `null`\n- Retorne APENAS JSON, sem texto adicional"
}
